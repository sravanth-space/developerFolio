{"status":"ok","feed":{"url":"https://medium.com/feed/@sravanth299","title":"Stories by Sravanth on Medium","link":"https://medium.com/@sravanth299?source=rss-ded463d6ea51------2","author":"","description":"Stories by Sravanth on Medium","image":"https://cdn-images-1.medium.com/proxy/1*TGH72Nnw24QL3iV9IOm4VA.png"},"items":[{"title":"Oauth enabled web API using built-in azure AAD(Azure active directory)","pubDate":"2020-12-06 08:18:12","link":"https://sravanth299.medium.com/oauth-enabled-web-api-using-built-in-azure-aad-azure-active-directory-fc2cd9df42bd?source=rss-ded463d6ea51------2","guid":"https://medium.com/p/fc2cd9df42bd","author":"Sravanth","thumbnail":"https://cdn-images-1.medium.com/max/908/1*2aFUWz1VGZQsrvNrtJus1Q.jpeg","description":"\n<p>Using Azure active directory I will be showing you the easiest way to protect your web\u00a0API.</p>\n<blockquote><strong>Requirements: your API should be deployed to the Azure app service and your users should be in your directory only.</strong></blockquote>\n<p>I will be using\u00a0.Net Core Web API to demonstrate it.</p>\n<blockquote>Open visual studio and click on create a new project and select ASP.NET Core Web Application template.</blockquote>\n<figure><img alt=\"\" src=\"https://cdn-images-1.medium.com/max/908/1*2aFUWz1VGZQsrvNrtJus1Q.jpeg\"><figcaption>visual studio\u00a02019</figcaption></figure><blockquote>Name the project as ProtectedWebAPI</blockquote>\n<figure><img alt=\"\" src=\"https://cdn-images-1.medium.com/max/905/1*sO9T85UWpYwTjujueooszw.jpeg\"></figure><blockquote>Select API project\u00a0template</blockquote>\n<figure><img alt=\"\" src=\"https://cdn-images-1.medium.com/max/1024/1*hMTIEdI1rdEDsCvf8cawuw.jpeg\"></figure><blockquote>Open WeatherForecastController where u can find a default\u00a0API</blockquote>\n<figure><img alt=\"\" src=\"https://cdn-images-1.medium.com/max/1024/1*f-D0jzULSahZwBSCJXK3Dw.jpeg\"></figure><blockquote>Click on IIS express to start your API project. you can see a json response in a\u00a0browser.</blockquote>\n<figure><img alt=\"\" src=\"https://cdn-images-1.medium.com/max/1024/1*IeXsoua0issQYljwQn7TAA.jpeg\"></figure><blockquote>Let's try hitting that endpoint in postman. you can see the same response.</blockquote>\n<figure><img alt=\"\" src=\"https://cdn-images-1.medium.com/max/1024/1*tT0Tuxb4f3mUWLNfHsZuzw.jpeg\"></figure><blockquote>Now the API is running in local lets publish it to azure app service. Right click on your project and select\u00a0publish.</blockquote>\n<figure><img alt=\"\" src=\"https://cdn-images-1.medium.com/max/1024/1*kT_dJrJANV3ZI7F8AK50sw.jpeg\"></figure><blockquote>Before publishing, we need an app service created in your Azure subscription. Let's do that\u00a0first.</blockquote>\n<figure><img alt=\"\" src=\"https://cdn-images-1.medium.com/max/920/1*PLvFV2rbq5RUMjm-fuyVvw.jpeg\"></figure><figure><img alt=\"\" src=\"https://cdn-images-1.medium.com/max/1024/1*UuNXzGoWmd_9kEAcwMMZqw.jpeg\"></figure><blockquote>Now your app service is ready let's publish our\u00a0API.</blockquote>\n<figure><img alt=\"\" src=\"https://cdn-images-1.medium.com/max/1024/1*X_Ho6FIrE6jXBEqiscxwCg.jpeg\"></figure><figure><img alt=\"\" src=\"https://cdn-images-1.medium.com/max/1024/1*t1zMNs1-bxeD7PEUDhOPAQ.jpeg\"></figure><figure><img alt=\"\" src=\"https://cdn-images-1.medium.com/max/1024/1*4cnbEbm2okSeBxEOacbBMQ.jpeg\"></figure><blockquote>After the above steps click on\u00a0publish.</blockquote>\n<figure><img alt=\"\" src=\"https://cdn-images-1.medium.com/max/1024/1*8YIrOwwV3HRFiXe4We4Xxg.jpeg\"></figure><blockquote>Now our API is published at <a href=\"https://protectedwebapidemo.azurewebsites.net/weatherforecast\">https://protectedwebapidemo.azurewebsites.net</a>.</blockquote>\n<blockquote>Let's try hitting it in\u00a0postman.</blockquote>\n<figure><img alt=\"\" src=\"https://cdn-images-1.medium.com/max/1024/1*2tLhkd6aYuN1znaS3zdjTA.jpeg\"></figure><blockquote>Now the actual part of enabling OAuth to protect our web\u00a0API.</blockquote>\n<p><strong>Steps to enable authentication/authorization:</strong></p>\n<ol>\n<li>Go to <strong>authentication/authorization in your app\u00a0service.</strong>\n</li>\n<li>click on and select log in with Azure Active Directory.</li>\n<li>In authentication providers select AAD and select express to create an app registration.</li>\n</ol>\n<figure><img alt=\"\" src=\"https://cdn-images-1.medium.com/max/1024/1*tYNWcitA9W17EcT2TUAvww.jpeg\"></figure><figure><img alt=\"\" src=\"https://cdn-images-1.medium.com/max/1024/1*mb9fQhQ1riwAUZSU_Ccm8A.jpeg\"></figure><figure><img alt=\"\" src=\"https://cdn-images-1.medium.com/max/774/1*VZATyjlqjCL9HZwehiZthA.jpeg\"></figure><figure><img alt=\"\" src=\"https://cdn-images-1.medium.com/max/1024/1*Q7DSuVIHJRKb_hCBocE7Kg.jpeg\"></figure><blockquote>Now try the API in\u00a0postman.</blockquote>\n<figure><img alt=\"\" src=\"https://cdn-images-1.medium.com/max/1024/1*VSwMJx8cshJQJdc9jEK_uQ.jpeg\"></figure><blockquote>You will get a <strong>401 Unauthorized erro</strong>r. As we are not passing any auth tokens in the request. To generate the auth token and hitting the api will be in <strong>PART2.(based on the response for this\u00a0post).</strong>\n</blockquote>\n<img src=\"https://medium.com/_/stat?event=post.clientViewed&amp;referrerSource=full_rss&amp;postId=fc2cd9df42bd\" width=\"1\" height=\"1\" alt=\"\">\n","content":"\n<p>Using Azure active directory I will be showing you the easiest way to protect your web\u00a0API.</p>\n<blockquote><strong>Requirements: your API should be deployed to the Azure app service and your users should be in your directory only.</strong></blockquote>\n<p>I will be using\u00a0.Net Core Web API to demonstrate it.</p>\n<blockquote>Open visual studio and click on create a new project and select ASP.NET Core Web Application template.</blockquote>\n<figure><img alt=\"\" src=\"https://cdn-images-1.medium.com/max/908/1*2aFUWz1VGZQsrvNrtJus1Q.jpeg\"><figcaption>visual studio\u00a02019</figcaption></figure><blockquote>Name the project as ProtectedWebAPI</blockquote>\n<figure><img alt=\"\" src=\"https://cdn-images-1.medium.com/max/905/1*sO9T85UWpYwTjujueooszw.jpeg\"></figure><blockquote>Select API project\u00a0template</blockquote>\n<figure><img alt=\"\" src=\"https://cdn-images-1.medium.com/max/1024/1*hMTIEdI1rdEDsCvf8cawuw.jpeg\"></figure><blockquote>Open WeatherForecastController where u can find a default\u00a0API</blockquote>\n<figure><img alt=\"\" src=\"https://cdn-images-1.medium.com/max/1024/1*f-D0jzULSahZwBSCJXK3Dw.jpeg\"></figure><blockquote>Click on IIS express to start your API project. you can see a json response in a\u00a0browser.</blockquote>\n<figure><img alt=\"\" src=\"https://cdn-images-1.medium.com/max/1024/1*IeXsoua0issQYljwQn7TAA.jpeg\"></figure><blockquote>Let's try hitting that endpoint in postman. you can see the same response.</blockquote>\n<figure><img alt=\"\" src=\"https://cdn-images-1.medium.com/max/1024/1*tT0Tuxb4f3mUWLNfHsZuzw.jpeg\"></figure><blockquote>Now the API is running in local lets publish it to azure app service. Right click on your project and select\u00a0publish.</blockquote>\n<figure><img alt=\"\" src=\"https://cdn-images-1.medium.com/max/1024/1*kT_dJrJANV3ZI7F8AK50sw.jpeg\"></figure><blockquote>Before publishing, we need an app service created in your Azure subscription. Let's do that\u00a0first.</blockquote>\n<figure><img alt=\"\" src=\"https://cdn-images-1.medium.com/max/920/1*PLvFV2rbq5RUMjm-fuyVvw.jpeg\"></figure><figure><img alt=\"\" src=\"https://cdn-images-1.medium.com/max/1024/1*UuNXzGoWmd_9kEAcwMMZqw.jpeg\"></figure><blockquote>Now your app service is ready let's publish our\u00a0API.</blockquote>\n<figure><img alt=\"\" src=\"https://cdn-images-1.medium.com/max/1024/1*X_Ho6FIrE6jXBEqiscxwCg.jpeg\"></figure><figure><img alt=\"\" src=\"https://cdn-images-1.medium.com/max/1024/1*t1zMNs1-bxeD7PEUDhOPAQ.jpeg\"></figure><figure><img alt=\"\" src=\"https://cdn-images-1.medium.com/max/1024/1*4cnbEbm2okSeBxEOacbBMQ.jpeg\"></figure><blockquote>After the above steps click on\u00a0publish.</blockquote>\n<figure><img alt=\"\" src=\"https://cdn-images-1.medium.com/max/1024/1*8YIrOwwV3HRFiXe4We4Xxg.jpeg\"></figure><blockquote>Now our API is published at <a href=\"https://protectedwebapidemo.azurewebsites.net/weatherforecast\">https://protectedwebapidemo.azurewebsites.net</a>.</blockquote>\n<blockquote>Let's try hitting it in\u00a0postman.</blockquote>\n<figure><img alt=\"\" src=\"https://cdn-images-1.medium.com/max/1024/1*2tLhkd6aYuN1znaS3zdjTA.jpeg\"></figure><blockquote>Now the actual part of enabling OAuth to protect our web\u00a0API.</blockquote>\n<p><strong>Steps to enable authentication/authorization:</strong></p>\n<ol>\n<li>Go to <strong>authentication/authorization in your app\u00a0service.</strong>\n</li>\n<li>click on and select log in with Azure Active Directory.</li>\n<li>In authentication providers select AAD and select express to create an app registration.</li>\n</ol>\n<figure><img alt=\"\" src=\"https://cdn-images-1.medium.com/max/1024/1*tYNWcitA9W17EcT2TUAvww.jpeg\"></figure><figure><img alt=\"\" src=\"https://cdn-images-1.medium.com/max/1024/1*mb9fQhQ1riwAUZSU_Ccm8A.jpeg\"></figure><figure><img alt=\"\" src=\"https://cdn-images-1.medium.com/max/774/1*VZATyjlqjCL9HZwehiZthA.jpeg\"></figure><figure><img alt=\"\" src=\"https://cdn-images-1.medium.com/max/1024/1*Q7DSuVIHJRKb_hCBocE7Kg.jpeg\"></figure><blockquote>Now try the API in\u00a0postman.</blockquote>\n<figure><img alt=\"\" src=\"https://cdn-images-1.medium.com/max/1024/1*VSwMJx8cshJQJdc9jEK_uQ.jpeg\"></figure><blockquote>You will get a <strong>401 Unauthorized erro</strong>r. As we are not passing any auth tokens in the request. To generate the auth token and hitting the api will be in <strong>PART2.(based on the response for this\u00a0post).</strong>\n</blockquote>\n<img src=\"https://medium.com/_/stat?event=post.clientViewed&amp;referrerSource=full_rss&amp;postId=fc2cd9df42bd\" width=\"1\" height=\"1\" alt=\"\">\n","enclosure":{},"categories":["authentication","azure","api","azure-active-directory","oauth2"]}]}